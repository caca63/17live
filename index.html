<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>17Live ä¸‰æ˜Ÿå½©ä¸­çæ©Ÿç‡è¨ˆç®—å™¨ v18.4.1</title>
<style>
body{
  background:#0f172a;color:#e5e7eb;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
  margin:0;padding:16px;
}
.card{
  background:#111827cc;padding:10px;border-radius:16px;
  margin-bottom:8px;box-shadow:0 10px 25px rgba(15,23,42,.6);
}
.btn{
  padding:6px 10px;border-radius:999px;border:0;
  background:linear-gradient(135deg,#22d3ee,#60a5fa);
  color:#020617;font-weight:700;cursor:pointer;font-size:13px;
}
.btn.sec{
  background:#020617;color:#e5e7eb;
  border:1px solid rgba(148,163,184,.25);
}
input,textarea,select{
  width:100%;padding:8px;border-radius:10px;
  border:1px solid rgba(148,163,184,.25);
  background:#020617;color:#e5e7eb;box-sizing:border-box;
  font-size:13px;
}
.row{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin-top:4px;}
.divider{border-top:1px dashed rgba(148,163,184,.4);margin:4px 0;}
.mono{white-space:pre-wrap;font-family:ui-monospace,Consolas,monospace;}
label.switch{display:inline-block;font-size:13px;vertical-align:middle;margin:0;padding:0;}
label.switch input{margin-right:4px;vertical-align:middle;}
#strictWrap{display:inline-block;font-size:13px;margin:0;padding:0;}
#strictWrap input{margin-right:3px;vertical-align:middle;}
.split2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;}
.chip{
  background:#1e293b;border-radius:12px;padding:4px 6px;
  font-size:13px;border:1px solid rgba(148,163,184,.35);
  box-shadow:0 4px 10px rgba(15,23,42,.8);
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:4px;
}
#toplist .chip { margin-bottom:2px; } /* Top å€å¡Šé–“è·ç¸®å° */
.chip span.label{color:#e5e7eb;}
.chip span.value{font-weight:600;}
.chip.rankTop{
  border-color:#38bdf8;
  box-shadow:0 0 0 1px rgba(56,189,248,.4),0 10px 25px rgba(15,23,42,.9);
  background:radial-gradient(circle at top,#0ea5e944,#020617);
}
.chip.rankTop span.label{color:#f9fafb;}
.chip.rankTop span.value{color:#7dd3fc;}
.hit-table-wrapper{
  max-height:260px;overflow:auto;border-radius:10px;
  border:1px solid rgba(148,163,184,.4);background:#020617;
}
.hit-table{width:100%;border-collapse:collapse;font-size:12px;min-width:480px;}
.hit-table thead{position:sticky;top:0;background:#020617;z-index:1;}
.hit-table th,.hit-table td{
  padding:6px 8px;text-align:left;
  border-bottom:1px solid rgba(30,64,175,.5);
}
.hit-table th{color:#bfdbfe;font-weight:600;}
.hit-table tr:nth-child(even){background:#020617;}
.hit-table tr:nth-child(odd){background:#020617;}
.hit-table tr:hover{background:#0b1120;}
</style>
</head>
<body>
<h1>17Live ä¸‰æ˜Ÿå½©ä¸­çæ©Ÿç‡è¨ˆç®—å™¨ v18.4.1</h1>
<div id="stats" style="color:#60a5fa;font-size:13px;line-height:1.4;margin-bottom:6px"></div>
<div style="color:#94a3b8;font-size:13px;margin-bottom:8px">
  å»ºè­°é è¨­ï¼šr=0.80ã€å•Ÿç”¨ã€ŒğŸ” ç†±è™Ÿé€£é–‹æ‡²ç½°ã€èˆ‡ã€Œé¿å…é‡è¤‡ä¸Šä¸€æœŸã€
</div>

<div class="card">
  <label>è¡°æ¸›æ¬Šé‡ r</label>
  <div class="row">
    <input id="r" type="number" step="0.01" value="0.8" min="0" max="1" style="max-width:90px">
    <button class="btn sec" onclick="setR(0.6)">r=0.6</button>
    <button class="btn sec" onclick="setR(0.8)">r=0.8</button>
    <button class="btn sec" onclick="setR(0.95)">r=0.95</button>
  </div>
  <div class="row" style="margin-top:6px">
    <label class="switch"><input type="checkbox" id="streak" checked> ğŸ” ç†±è™Ÿé€£é–‹æ‡²ç½°</label>
    <label class="switch"><input type="checkbox" id="avoidRepeat" checked onchange="toggleStrict()"> é¿å…é‡è¤‡ä¸Šä¸€æœŸ</label>
    <label id="strictWrap"><input type="checkbox" id="strictRepeat"> åš´æ ¼æ’é™¤ï¼ˆå…©ç¢¼ä»¥ä¸Šé‡è¤‡ç›´æ¥å‰ƒé™¤ï¼‰</label>
  </div>
  <label style="margin-top:6px">æˆ‘çš„ä¸‹æ³¨ï¼ˆä¸‰é¡†ä¸€çµ„ï¼Œæ¯è¡Œä¸€çµ„ï¼‰</label>
  <textarea id="bets" rows="3" placeholder="ä¾‹å¦‚ï¼š1 4 6&#10;1 9 2&#10;4 6 9"></textarea>
  <div class="row" style="margin-top:6px">
    <button class="btn" onclick="run()">è¨ˆç®—ä¸­çæ©Ÿç‡</button>
  </div>
  <div class="divider"></div>
  <label>æ–°å¢æœ€æ–°ä¸€æœŸï¼ˆä¸‰é¡†ï¼‰</label>
  <input id="latest" placeholder="ä¾‹å¦‚ï¼š2 5 7">
  <div class="row">
    <button class="btn" onclick="appendLatest()">ï¼‹ åŠ å…¥åˆ°æ­·å²</button>
    <button class="btn sec" onclick="clearAdded()">é‡ç½®æœ¬æ©Ÿæ–°å¢</button>
  </div>
</div>
<div class="card">
  <h3>ğŸ”¢ å„è™Ÿç¢¼æ©Ÿç‡åˆ†ä½ˆï¼ˆä¾æ¬Šé‡æ’åºï¼‰</h3>
  <div id="singleTop" class="mono split2" style="margin-top:4px;">
    <div style="grid-column:1 / -1;font-size:13px;color:#9ca3af">
      å°šæœªè¨ˆç®—ï¼Œè«‹å…ˆæŒ‰ã€Œè¨ˆç®—ä¸­çæ©Ÿç‡ã€ã€‚
    </div>
  </div>
</div>

<div class="card">
  <h3>ğŸ’¡ æœ€æ–°æ¨è–¦çµæœï¼ˆTop1ï½Top10ï¼‰</h3>
  <div id="toplist" class="mono split2" style="margin-top:4px;"></div>
</div>

<div class="card">
  <h3>æˆ‘çš„ä¸‹æ³¨çµæœ</h3>
  <div id="myres" class="mono" style="font-size:13px;color:#94a3b8">å°šæœªè¨ˆç®—</div>
</div>

<script>
const baseHistory=[[7,5,6],[9,10,4],[9,8,1],[5,4,1],[6,9,1],[3,7,10],[10,2,3],[8,9,6],[1,5,9],[4,1,8],[6,4,2]];
function toggleStrict(){
  document.getElementById("strictWrap").style.display=
    document.getElementById("avoidRepeat").checked?"inline-block":"none";
}
toggleStrict();
function setR(v){document.getElementById("r").value=v;}

function singleProbsByR(hist,r){
  const w=Array(10).fill(0),n=hist.length;
  for(let i=0;i<n;i++){
    const ww=Math.pow(r,n-1-i);
    for(const x of hist[i])w[x-1]+=ww;
  }
  const s=w.reduce((a,b)=>a+b,0)||1;
  return w.map(v=>v/s);
}
function allTrios(){
  const r=[];
  for(let i=1;i<=10;i++)
    for(let j=i+1;j<=10;j++)
      for(let k=j+1;k<=10;k++)
        r.push([i,j,k]);
  return r;
}
function trioProb(p,t){
  const[a,b,c]=t.map(x=>p[x-1]);
  const seq=(x,y,z)=>(x*(y/(1-x))*(z/(1-x-y)));
  return[
    seq(a,b,c),seq(a,c,b),
    seq(b,a,c),seq(b,c,a),
    seq(c,a,b),seq(c,b,a)
  ].reduce((x,y)=>x+y,0);
}
function fmt(x){return(x*100).toFixed(2)+"%";}
function computeTopCombos(hist,probs){
  const tri=allTrios();
  const scored=[];
  for(const t of tri){
    let sc=trioProb(probs,t);
    if(sc>0)scored.push({t,sc});
  }
  scored.sort((a,b)=>b.sc-a.sc);
  return scored;
}
function run(){
  const hist=baseHistory;
  const r=parseFloat(document.getElementById("r").value)||0.8;
  const probs=singleProbsByR(hist,r);
  const scored=computeTopCombos(hist,probs);
  const top=scored.slice(0,10);
  const topContainer=document.getElementById("toplist");
  const left=top.slice(0,5),right=top.slice(5,10);
  let leftHtml="",rightHtml="";
  left.forEach((o,idx)=>{
    const rank=idx+1;
    const cls=rank<=3?"chip rankTop":"chip";
    leftHtml+=`<div class="${cls}"><span class="label">Top${rank}ï½œ${o.t.join(" ")}</span><span class="value">${fmt(o.sc)}</span></div>`;
  });
  right.forEach((o,idx)=>{
    const rank=idx+6;
    const cls=rank<=3?"chip rankTop":"chip";
    rightHtml+=`<div class="${cls}"><span class="label">Top${rank}ï½œ${o.t.join(" ")}</span><span class="value">${fmt(o.sc)}</span></div>`;
  });
  topContainer.innerHTML=`<div>${leftHtml}</div><div>${rightHtml}</div>`;
  const bets=document.getElementById("bets").value.trim();
  if(!bets){
    document.getElementById("myres").textContent="å°šæœªè¼¸å…¥ä¸‹æ³¨ã€‚";
  }else{
    const lines=bets.split(/\n+/).map(l=>l.trim()).filter(Boolean);
    const res=[];
    for(const l of lines){
      const trio=l.split(/\s+/).map(Number).filter(n=>!isNaN(n));
      if(trio.length!==3){
        res.push(`${l} â†’ æ ¼å¼éŒ¯èª¤`);
        continue;
      }
      const pz=trioProb(probs,trio);
      const sortedKey=trio.slice().sort((a,b)=>a-b).join(",");
      const rankIndex=scored.findIndex(x=>x.t.join(",")===sortedKey);
      const rankText=rankIndex>=0?`ï¼ˆç¬¬ ${rankIndex+1} åï¼å…± 120 çµ„ï¼‰`:"";
      res.push(`${trio.join(" ")} â†’ ${fmt(pz)} ${rankText}`);
    }
    document.getElementById("myres").textContent=res.join("\n");
  }
}
</script>
</body>
</html>
